<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de N√≥mina - SIMETRIC GYM</title>
    <link rel="stylesheet" href="nomina.css">
</head>
<body>
    <header>
        <h1 id="mainttl">SIMETRIC GYM</h1>
        <div class="img">             
            <img src="resources/logo2_simetricG.png" height="60px" width="60px" alt="">
        </div>
    </header>
    <a href="menu_personal.html" class="back_btn">
        <button><img class="icon" src="resources/arrow_back_left_icon.png" alt="" height="40px" width="40px"></button>
    </a>
    <section id="nomina-section">
        <div class="container">
            <div class="header-section">
                <h2>üí∞ Gesti√≥n de N√≥mina</h2>
                
                <div class="periodo-selector">
                    <div class="selector-group">
                        <label for="mes-nomina">üìÖ Mes:</label>
                        <select id="mes-nomina">
                            <option value="1">Enero</option>
                            <option value="2">Febrero</option>
                            <option value="3">Marzo</option>
                            <option value="4">Abril</option>
                            <option value="5">Mayo</option>
                            <option value="6">Junio</option>
                            <option value="7">Julio</option>
                            <option value="8">Agosto</option>
                            <option value="9">Septiembre</option>
                            <option value="10">Octubre</option>
                            <option value="11">Noviembre</option>
                            <option value="12">Diciembre</option>
                        </select>
                    </div>
                    
                    <div class="selector-group">
                        <label for="a√±o-nomina">üìÜ A√±o:</label>
                        <select id="a√±o-nomina">
                            <!-- Se llenar√° din√°micamente -->
                        </select>
                    </div>
                    
                    <button id="cargar-nomina" class="btn-primary">üîÑ Cargar N√≥mina</button>
                    <button id="nueva-nomina" class="btn-success">‚ûï Nueva N√≥mina</button>
                </div>
            </div>

            <!-- Resumen de n√≥mina -->
            <div class="resumen-nomina" id="resumen-nomina" style="display: none;">
                <h3>üìä Resumen del Per√≠odo</h3>
                <div class="resumen-grid">
                    <div class="resumen-card">
                        <div class="resumen-numero" id="total-empleados">0</div>
                        <div class="resumen-label">Empleados</div>
                    </div>
                    <div class="resumen-card">
                        <div class="resumen-numero" id="total-devengado">$0</div>
                        <div class="resumen-label">Total Devengado</div>
                    </div>
                    <div class="resumen-card">
                        <div class="resumen-numero" id="total-deducciones">$0</div>
                        <div class="resumen-label">Total Deducciones</div>
                    </div>
                    <div class="resumen-card">
                        <div class="resumen-numero" id="total-neto">$0</div>
                        <div class="resumen-label">Total Neto</div>
                    </div>
                </div>
                
                <div class="acciones-nomina">
                    <button id="procesar-nomina" class="btn-success">üíæ Procesar N√≥mina</button>
                    <button id="generar-reporte-nomina" class="btn-info">üìÑ Generar Reporte</button>
                    <button id="calcular-prestaciones" class="btn-warning">üè¶ Calcular Prestaciones</button>
                    <button id="calcular-utilidades" class="btn-special">üéÅ Calcular Utilidades</button>
                </div>
            </div>

            <!-- Lista de empleados para n√≥mina -->
            <div class="nomina-container" id="nomina-container">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>
    </section>

    <!-- Popup para editar n√≥mina individual -->
    <div id="popup-nomina" class="popup oculto">
        <div class="popup-contenido">
            <span class="cerrar-popup" id="cerrar-popup-nomina">&times;</span>
            <h3 id="titulo-nomina">üí∞ Editar N√≥mina</h3>
            
            <form id="form-nomina">
                <div class="popup-section">
                    <h4>üìã Informaci√≥n B√°sica</h4>
                    <div class="popup-row">
                        <div class="popup-field">
                            <label>Empleado:</label>
                            <input type="text" id="nomina-empleado" readonly>
                        </div>
                        <div class="popup-field">
                            <label>Per√≠odo:</label>
                            <input type="text" id="nomina-periodo" readonly>
                        </div>
                    </div>
                    
                    <div class="popup-row">
                        <div class="popup-field">
                            <label for="dias-trabajados">D√≠as Trabajados:</label>
                            <input type="number" id="dias-trabajados" min="1" max="31" value="30">
                        </div>
                        <div class="popup-field">
                            <label for="sueldo-base">Sueldo Base (USD):</label>
                            <input type="number" id="sueldo-base" step="0.01" readonly>
                        </div>
                    </div>
                </div>

                <div class="popup-section">
                    <h4>üíµ Devengado</h4>
                    <div class="popup-row">
                        <div class="popup-field">
                            <label for="dias-feriados">D√≠as Feriados Trabajados:</label>
                            <input type="number" id="dias-feriados" step="0.5" min="0" max="31" value="0">
                            <small>D√≠as feriados trabajados (recargo 50% autom√°tico)</small>
                        </div>
                        <div class="popup-field">
                            <label for="bonos">Bonos (USD):</label>
                            <input type="number" id="bonos" step="0.01" min="0" value="0">
                        </div>
                    </div>

                    <div class="popup-row">
                        <div class="popup-field">
                            <label for="comisiones">Comisiones (USD):</label>
                            <input type="number" id="comisiones" step="0.01" min="0" value="0">
                        </div>
                        <div class="popup-field">
                            <!-- Campo vac√≠o para mantener el layout -->
                        </div>
                    </div>
                </div>

                <div class="popup-section">
                    <h4>üìä C√°lculos Autom√°ticos</h4>
                    <div class="calculo-grid">
                        <div class="calculo-item">
                            <span class="calculo-label">Sueldo Proporcional:</span>
                            <span class="calculo-valor" id="sueldo-proporcional">$0.00</span>
                        </div>
                        <div class="calculo-item">
                            <span class="calculo-label">D√≠as Feriados (50% recargo):</span>
                            <span class="calculo-valor" id="monto-dias-feriados-calc">$0.00</span>
                        </div>
                        <div class="calculo-item">
                            <span class="calculo-label">Total Devengado:</span>
                            <span class="calculo-valor" id="total-devengado-calc">$0.00</span>
                        </div>
                        <div class="calculo-item">
                            <span class="calculo-label">Seguro Social (4%):</span>
                            <span class="calculo-valor" id="seguro-social-calc">$0.00</span>
                        </div>
                        <div class="calculo-item">
                            <span class="calculo-label">LPH (1%):</span>
                            <span class="calculo-valor" id="lph-calc">$0.00</span>
                        </div>
                        <div class="calculo-item">
                            <span class="calculo-label">Paro Forzoso (0.5%):</span>
                            <span class="calculo-valor" id="paro-forzoso-calc">$0.00</span>
                        </div>
                        <div class="calculo-item">
                            <span class="calculo-label">Total Deducciones:</span>
                            <span class="calculo-valor" id="total-deducciones-calc">$0.00</span>
                        </div>
                        <div class="calculo-item destacado">
                            <span class="calculo-label">Sueldo Neto:</span>
                            <span class="calculo-valor" id="sueldo-neto-calc">$0.00</span>
                        </div>
                        <div class="calculo-item">
                            <span class="calculo-label">Prestaciones Sociales:</span>
                            <span class="calculo-valor" id="prestaciones-calc">$0.00</span>
                        </div>
                        <div class="calculo-item">
                            <span class="calculo-label">Vacaciones:</span>
                            <span class="calculo-valor" id="vacaciones-calc">$0.00</span>
                        </div>
                    </div>
                </div>

                <div class="popup-section">
                    <h4>üìù Observaciones</h4>
                    <textarea id="observaciones" rows="3" placeholder="Observaciones adicionales..."></textarea>
                </div>
                
                <div class="popup-buttons">
                    <button type="submit" class="btn-success">üíæ Guardar N√≥mina</button>
                    <button type="button" id="cancelar-nomina" class="btn-secondary">‚ùå Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Popup para prestaciones sociales -->
    <div id="popup-prestaciones" class="popup oculto">
        <div class="popup-contenido">
            <span class="cerrar-popup" id="cerrar-popup-prestaciones">&times;</span>
            <h3>üè¶ C√°lculo de Prestaciones Sociales</h3>
            
            <div class="prestaciones-info">
                <p><strong>A√±o de c√°lculo:</strong> <span id="a√±o-prestaciones"></span></p>
                <p><strong>Salario m√≠nimo:</strong> $<span id="salario-minimo-prestaciones"></span> USD</p>
                <p><strong>Nota:</strong> Las prestaciones se calculan como 30 d√≠as de salario por a√±o trabajado m√°s intereses del 12% anual.</p>
            </div>
            
            <div class="prestaciones-container" id="prestaciones-container">
                <!-- Se llenar√° din√°micamente -->
            </div>
            
            <div class="prestaciones-acciones">
                <button id="procesar-prestaciones" class="btn-success">üíæ Procesar Prestaciones</button>
                <button id="cancelar-prestaciones" class="btn-secondary">‚ùå Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Popup para utilidades -->
    <div id="popup-utilidades" class="popup oculto">
        <div class="popup-contenido">
            <span class="cerrar-popup" id="cerrar-popup-utilidades">&times;</span>
            <h3>üéÅ C√°lculo de Utilidades</h3>
            
            <div class="utilidades-config">
                <div class="config-row">
                    <div class="config-field">
                        <label for="a√±o-utilidades">A√±o:</label>
                        <select id="a√±o-utilidades">
                            <!-- Se llenar√° din√°micamente -->
                        </select>
                    </div>
                    <div class="config-field">
                        <label for="beneficio-empresa">Beneficio de la Empresa (USD):</label>
                        <input type="number" id="beneficio-empresa" step="0.01" min="0" placeholder="0.00">
                    </div>
                </div>
                
                <div class="utilidades-info">
                    <p><strong>F√≥rmula:</strong> M√≠nimo 15 d√≠as + distribuci√≥n proporcional del beneficio</p>
                    <p><strong>M√°ximo:</strong> 4 meses de salario por empleado</p>
                    <p><strong>Base legal:</strong> Art√≠culo 131 de la Ley Org√°nica del Trabajo</p>
                </div>
            </div>
            
            <div class="utilidades-container" id="utilidades-container">
                <!-- Se llenar√° din√°micamente -->
            </div>
            
            <div class="utilidades-acciones">
                <button id="calcular-utilidades-btn" class="btn-primary">üßÆ Calcular</button>
                <button id="procesar-utilidades" class="btn-success" style="display: none;">üíæ Procesar Utilidades</button>
                <button id="cancelar-utilidades" class="btn-secondary">‚ùå Cancelar</button>
            </div>
        </div>
    </div>

    <script src="nomina.js"></script>
</body>
</html>
